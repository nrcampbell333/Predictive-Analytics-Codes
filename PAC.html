<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PAC New Code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="gbms_files/libs/clipboard/clipboard.min.js"></script>
<script src="gbms_files/libs/quarto-html/quarto.js"></script>
<script src="gbms_files/libs/quarto-html/popper.min.js"></script>
<script src="gbms_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="gbms_files/libs/quarto-html/anchor.min.js"></script>
<link href="gbms_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="gbms_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="gbms_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="gbms_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="gbms_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PAC New Code</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>songs <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">'/Users/najaecampbell/Desktop/PAC/soundofmusiclala/analysisData.csv'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>scoringData <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">'/Users/najaecampbell/Desktop/PAC/soundofmusiclala/scoringData.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>genre <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[|</span><span class="sc">\\</span><span class="st">]|'"</span>, <span class="st">""</span>, scoringData<span class="sc">$</span>genre)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>genre <span class="ot">=</span> <span class="fu">ifelse</span>(scoringData<span class="sc">$</span>genre <span class="sc">==</span> <span class="st">"[]"</span>, <span class="cn">NA</span>, scoringData<span class="sc">$</span>genre)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>genre_mode1 <span class="ot">=</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="sc">-</span><span class="fu">table</span>(scoringData<span class="sc">$</span>genre)))[<span class="dv">1</span>]</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>genre[<span class="fu">is.na</span>(scoringData<span class="sc">$</span>genre)] <span class="ot">=</span> genre_mode1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>songs<span class="sc">$</span>genre <span class="ot">=</span> <span class="fu">ifelse</span>(songs<span class="sc">$</span>genre <span class="sc">==</span> <span class="st">"[]"</span>, <span class="cn">NA</span>, songs<span class="sc">$</span>genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>genre_mode <span class="ot">=</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="sc">-</span><span class="fu">table</span>(songs<span class="sc">$</span>genre)))[<span class="dv">1</span>]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>songs<span class="sc">$</span>genre[<span class="fu">is.na</span>(songs<span class="sc">$</span>genre)] <span class="ot">=</span> genre_mode</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>unique <span class="ot">=</span> <span class="fu">unique</span>(songs<span class="sc">$</span>genre)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(unique)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2986</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>freqfunc <span class="ot">=</span> <span class="cf">function</span>(x,n){</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="fu">sort</span>(<span class="fu">table</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">as.character</span>(x), <span class="st">", "</span>)))), n)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">freqfunc</span>(songs<span class="sc">$</span>genre, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
         'new wave pop'                   'r&amp;b'             'soft rock' 
                    976                    1162                    1201 
                 'funk'                  'soul'         'bubblegum pop' 
                   1262                    1280                    1295 
  'urban contemporary']               'hip hop'                   'rap' 
                   1369                    1405                    1463 
   'brill building pop'           'quiet storm'            'soft rock'] 
                   1627                    1658                    1701 
                 'rock'            ['dance pop'          'classic rock' 
                   1791                    1794                    1823 
        'country road']                   'pop'           ['album rock' 
                   1829                    1832                    1834 
              'pop rap'             'folk rock'                'motown' 
                   1869                    1978                    2001 
['contemporary country'               'country'      ['adult standards' 
                   2490                    2654                    2658 
          'mellow gold' 
                   2989 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freqfunc</span>(scoringData<span class="sc">$</span>genre, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     post-teen pop       country rock            country urban contemporary 
               221                223                233                237 
             disco       classic soul      rock-and-roll               funk 
               241                250                254                269 
     bubblegum pop            hip hop        quiet storm          folk rock 
               297                299                312                352 
        album rock            pop rap                rap       classic rock 
               357                358                358                360 
            motown               soul                pop brill building pop 
               370                388                404                419 
         dance pop               rock    adult standards          soft rock 
               428                451                510                564 
       mellow gold 
               589 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>songsclean <span class="ot">=</span> songs</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>pop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"pop"</span>))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>funk <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"funk"</span>))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>hiphop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"hip hop"</span>))</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>rock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"rock"</span>))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>motown <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"motown"</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>softrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"soft rock"</span>))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>classicrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"classic rock"</span>))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>soul <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"soul"</span>))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>classicsoul <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"classic soul"</span>))</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>mellowgold <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"mellow gold"</span>))</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>urbancontemporary <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"urban contemporary"</span>))</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>brillbuildingpop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"brill building pop"</span>))</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>poprap <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"pop rap"</span>))</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>adultstandards <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"adult standards"</span>))</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>alternativemetal <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"alternative metal"</span>))</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>alternativehiphop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"alternative hip hop"</span>))</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>folkrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"folk rock"</span>))</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>bubblegumpop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"bubblegum pop"</span>))</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>country <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"country"</span>))</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>contemporarycountry <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"contemporary country"</span>))</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>newwavepop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"new wave pop"</span>))</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>quietstorm <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"quiet storm"</span>))</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>dancepop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"dance pop"</span>))</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>albumrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"album rock"</span>))</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>rap <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"rap"</span>))</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>rb <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"r&amp;b"</span>))</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>countryroad <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(songs<span class="sc">$</span>genre, <span class="st">"countryroad"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>songsclean<span class="sc">$</span>track_explicit <span class="ot">=</span> <span class="fu">ifelse</span>(songsclean<span class="sc">$</span>track_explicit, <span class="dv">1</span>, <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>pop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"pop"</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>funk <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"funk"</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>hiphop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"hip hop"</span>))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>rock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"rock"</span>))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>motown <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"motown"</span>))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>softrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"soft rock"</span>))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>classicrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"classic rock"</span>))</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>soul <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"soul"</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>classicsoul <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"classic soul"</span>))</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>mellowgold <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"mellow gold"</span>))</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>urbancontemporary <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"urban contemporary"</span>))</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>brillbuildingpop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"brill building pop"</span>))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>poprap <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"pop rap"</span>))</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>adultstandards <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"adult standards"</span>))</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>alternativemetal <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"alternative metal"</span>))</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>alternativehiphop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"alternative hip hop"</span>))</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>folkrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"folk rock"</span>))</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>bubblegumpop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"bubblegum pop"</span>))</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>country <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"country"</span>))</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>contemporarycountry <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"contemporary country"</span>))</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>newwavepop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"new wave pop"</span>))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>quietstorm <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"quiet storm"</span>))</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>dancepop <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"dance pop"</span>))</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>albumrock <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"album rock"</span>))</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>rap <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"rap"</span>))</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>rb <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"r&amp;b"</span>))</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>scoringData<span class="sc">$</span>countryroad <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">str_detect</span>(scoringData<span class="sc">$</span>genre, <span class="st">"countryroad"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>songs_subset <span class="ot">&lt;-</span> songsclean[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">46</span>)]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggplot2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caTools)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1201</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>split <span class="ot">=</span> <span class="fu">sample.split</span>(songs_subset<span class="sc">$</span>rating,<span class="at">SplitRatio =</span> <span class="fl">0.7</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>train <span class="ot">=</span> songs_subset[split,]</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>test <span class="ot">=</span> songs_subset[<span class="sc">!</span>split,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   14492 obs. of  43 variables:
 $ id                 : int  30831 44458 26440 54630 51446 40756 22248 59877 40948 50450 ...
 $ track_duration     : num  166106 211066 332226 331466 295000 ...
 $ track_explicit     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ danceability       : num  0.154 0.759 0.804 0.57 0.612 0.575 0.615 0.418 0.307 0.615 ...
 $ energy             : num  0.185 0.699 0.714 0.629 0.542 0.434 0.497 0.532 0.267 0.845 ...
 $ key                : int  5 0 11 9 5 5 7 7 4 5 ...
 $ loudness           : num  -14.06 -5.75 -6.71 -7.61 -7.56 ...
 $ mode               : int  1 0 0 0 1 1 1 1 1 0 ...
 $ speechiness        : num  0.0315 0.0307 0.183 0.0331 0.0264 0.0312 0.439 0.0354 0.0327 0.0393 ...
 $ acousticness       : num  0.911 0.202 0.0567 0.593 0.0781 0.735 0.016 0.461 0.809 0.0928 ...
 $ instrumentalness   : num  2.67e-04 1.31e-04 6.21e-06 1.36e-04 0.00 6.59e-05 0.00 2.99e-06 0.00 2.77e-05 ...
 $ liveness           : num  0.112 0.443 0.0253 0.77 0.0763 0.105 0.312 0.83 0.269 0.0755 ...
 $ valence            : num  0.15 0.907 0.802 0.308 0.433 0.348 0.769 0.504 0.39 0.585 ...
 $ tempo              : num  84 93 139.7 127.9 76.7 ...
 $ time_signature     : int  4 4 4 4 4 4 3 3 3 4 ...
 $ rating             : int  37 72 39 32 46 46 25 28 39 17 ...
 $ pop                : num  1 1 0 0 0 1 0 0 1 1 ...
 $ funk               : num  0 0 1 0 1 0 0 0 0 0 ...
 $ hiphop             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ rock               : num  0 0 0 0 0 0 0 0 1 1 ...
 $ motown             : num  0 0 1 0 0 0 0 0 0 0 ...
 $ softrock           : num  0 0 0 0 0 0 0 0 0 1 ...
 $ classicrock        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ soul               : num  0 0 1 0 1 0 0 0 0 0 ...
 $ classicsoul        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ mellowgold         : num  1 0 0 0 0 0 0 0 0 1 ...
 $ urbancontemporary  : num  0 0 1 0 1 0 0 0 0 0 ...
 $ brillbuildingpop   : num  1 0 0 0 0 0 0 0 1 0 ...
 $ poprap             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ adultstandards     : num  1 0 0 0 0 0 0 0 1 0 ...
 $ alternativemetal   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ alternativehiphop  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ folkrock           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ bubblegumpop       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ country            : num  0 0 0 1 0 0 1 1 0 0 ...
 $ contemporarycountry: num  0 0 0 1 0 0 1 1 0 0 ...
 $ newwavepop         : num  0 0 0 0 0 0 0 0 0 1 ...
 $ quietstorm         : num  0 0 1 0 1 0 0 0 0 0 ...
 $ dancepop           : num  0 1 0 0 0 0 0 0 0 0 ...
 $ albumrock          : num  0 0 0 0 0 0 0 0 0 1 ...
 $ rap                : num  0 0 0 0 0 0 0 0 0 0 ...
 $ rb                 : num  0 0 1 0 1 0 0 0 0 0 ...
 $ countryroad        : num  0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ranger)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1201</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>forest_ranger <span class="ot">=</span> <span class="fu">ranger</span>(rating<span class="sc">~</span>track_duration<span class="sc">+</span>track_explicit<span class="sc">+</span>danceability<span class="sc">+</span>energy<span class="sc">+</span>key<span class="sc">+</span>loudness<span class="sc">+</span>mode<span class="sc">+</span>speechiness<span class="sc">+</span>acousticness<span class="sc">+</span>instrumentalness<span class="sc">+</span>liveness<span class="sc">+</span>valence<span class="sc">+</span>tempo<span class="sc">+</span>time_signature<span class="sc">+</span>pop<span class="sc">+</span>funk<span class="sc">+</span>hiphop<span class="sc">+</span>rock<span class="sc">+</span>motown<span class="sc">+</span>softrock<span class="sc">+</span>classicrock<span class="sc">+</span>soul<span class="sc">+</span>classicsoul<span class="sc">+</span>mellowgold<span class="sc">+</span>urbancontemporary<span class="sc">+</span>brillbuildingpop<span class="sc">+</span>poprap<span class="sc">+</span>adultstandards<span class="sc">+</span>alternativehiphop<span class="sc">+</span>alternativemetal<span class="sc">+</span>folkrock<span class="sc">+</span>bubblegumpop<span class="sc">+</span>country<span class="sc">+</span>contemporarycountry<span class="sc">+</span>newwavepop<span class="sc">+</span>quietstorm<span class="sc">+</span>dancepop<span class="sc">+</span>albumrock<span class="sc">+</span>rap<span class="sc">+</span>countryroad,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> train, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">num.trees =</span> <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Growing trees.. Progress: 69%. Estimated remaining time: 14 seconds.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">=</span> <span class="fu">predict</span>(forest_ranger, <span class="at">data =</span> scoringData, <span class="at">num.trees =</span> <span class="dv">1000</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>rmse_train_forest_ranger <span class="ot">=</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((pred<span class="sc">$</span>predictions <span class="sc">-</span> train<span class="sc">$</span>rating)<span class="sc">^</span><span class="dv">2</span>)); rmse_train_forest_ranger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in pred$predictions - train$rating: longer object length is not a
multiple of shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17.79554</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gbm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loaded gbm 2.1.8.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1201</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>boost <span class="ot">=</span> <span class="fu">gbm</span>(rating<span class="sc">~</span>track_duration<span class="sc">+</span>track_explicit<span class="sc">+</span>danceability<span class="sc">+</span>energy<span class="sc">+</span>key<span class="sc">+</span>loudness<span class="sc">+</span>mode<span class="sc">+</span>speechiness<span class="sc">+</span>acousticness<span class="sc">+</span>instrumentalness<span class="sc">+</span>liveness<span class="sc">+</span>valence<span class="sc">+</span>tempo<span class="sc">+</span>time_signature<span class="sc">+</span>pop<span class="sc">+</span>funk<span class="sc">+</span>hiphop<span class="sc">+</span>rock<span class="sc">+</span>motown<span class="sc">+</span>softrock<span class="sc">+</span>classicrock<span class="sc">+</span>soul<span class="sc">+</span>classicsoul<span class="sc">+</span>mellowgold<span class="sc">+</span>urbancontemporary<span class="sc">+</span>brillbuildingpop<span class="sc">+</span>poprap<span class="sc">+</span>adultstandards<span class="sc">+</span>alternativehiphop<span class="sc">+</span>alternativemetal<span class="sc">+</span>folkrock<span class="sc">+</span>bubblegumpop<span class="sc">+</span>country<span class="sc">+</span>contemporarycountry<span class="sc">+</span>newwavepop<span class="sc">+</span>quietstorm<span class="sc">+</span>dancepop<span class="sc">+</span>albumrock<span class="sc">+</span>rap<span class="sc">+</span>countryroad,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">data=</span>train,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">distribution=</span><span class="st">"gaussian"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">n.trees =</span> <span class="dv">1000</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">interaction.depth =</span> <span class="dv">4</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">shrinkage =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in gbm.fit(x = x, y = y, offset = offset, distribution = distribution,
: variable 40: countryroad has no variation.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>predboost <span class="ot">=</span> <span class="fu">predict</span>(boost, <span class="at">n.trees=</span><span class="dv">1000</span>, <span class="at">newdata =</span> scoringData)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>rmse_train_boost <span class="ot">=</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((predboost <span class="sc">-</span> train<span class="sc">$</span>rating)<span class="sc">^</span><span class="dv">2</span>)); rmse_train_boost</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predboost - train$rating: longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17.70159</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>rmse_train_boost</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17.70159</code></pre>
</div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>